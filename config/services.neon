services:
	- app\System\Application\Vite\Vite(http://localhost:5173, %wwwDir%/manifest.json, not(%debugMode%))
	nette.latteFactory:
			setup:
					- addFilter(asset, app\System\Application\Latte\AssetFilter())

	- app\System\Application\Routing\Factory\RouterFactory::createRouter
	- app\System\Application\Helper\TemplateRenderer(@twigEnvironment)
	- app\System\Application\Mapping\MapperNameResolver(typed(app\System\Application\Mapping\Mapper))

	inflector: app\System\Application\Inflector\InflectorFactory::create()

	- app\System\Application\Mapping\Map\CollectionMap(typed(app\System\Application\Mapping\Map\Collection\CollectionTypeMap))

	configLoader:
		factory: Twig\Loader\FilesystemLoader(%appDir%/../deploy/local)
	twigEnvironment:
		factory: Twig\Environment(@configLoader)

decorator:
	app\System\Application\Mapping\Mapper:
		setup:
			- setTypeMaps(typed(app\System\Application\Mapping\Map\TypeMap))

	app\System\Application\CQRS\Command\CommandHandler:
		setup:
			- setMapper(@app\System\Application\Mapping\CommandEntityMapper)
			- setEntityManager(@Doctrine\ORM\EntityManagerInterface)

	app\System\Application\CQRS\Query\QueryHandler:
		setup:
			- setMapper(@app\System\Application\Mapping\QueryEntityMapper)
			- setEntityManager(@Doctrine\ORM\EntityManagerInterface)